<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cyber Security Shooter ‚Äì With Questions</title>

<style>
body {
    margin: 0;
    background: #0e0e0e;
    font-family: Arial, sans-serif;
    color: white;
    text-align: center;
    overflow: hidden;
}

header {
    padding: 14px;
    background: #181818;
    font-size: 22px;
    border-bottom: 2px solid #222;
    font-weight: bold;
}

#scorePanel {
    margin: 10px;
    font-size: 18px;
}

button {
    padding: 12px 20px;
    font-size: 18px;
    background: #2b6aff;
    border: none;
    border-radius: 6px;
    color: white;
    cursor: pointer;
}

#gameArea {
    width: 100vw;
    height: 70vh;
    border: 2px solid #222;
    background: radial-gradient(circle, #202020, #0d0d0d);
    position: relative;
    overflow: hidden;
}

.item {
    position: absolute;
    width: 70px;
    height: 70px;
    border-radius: 50%;
    font-size: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    user-select: none;
}

.item.threat {
    background: #330000;
    border: 2px solid #ff4747;
    box-shadow: 0 0 10px #ff4747;
}

.item.safe {
    background: #003300;
    border: 2px solid #33ff99;
    box-shadow: 0 0 10px #33ff99;
}

.flash-green { background: #0a0 !important; }
.flash-red { background: #a00 !important; }

#questionBox {
    width: 90%;
    max-width: 480px;
    margin: auto;
    padding: 20px;
    background: #1b1b1b;
    border: 2px solid #2b6aff;
    border-radius: 10px;
    margin-top: 10px;
    display: none;
}

.option {
    padding: 10px;
    margin: 6px 0;
    background: #252525;
    border-radius: 6px;
    cursor: pointer;
}
.option:hover {
    background: #333;
}
</style>
</head>

<body>

<header>Cyber Security Shooter Game</header>

<div id="scorePanel">Score: 0 | Time: 30</div>
<button id="startBtn">Start Game</button>

<div id="gameArea"></div>

<div id="questionBox"></div>

<script>
let score = 0;
let timeLeft = 30;
let gameRunning = false;
let gameInterval;
let timerInterval;

// Threats vs Safe Icons
const threats = [
    {icon:"ü¶†", label:"Malware"},
    {icon:"üíÄ", label:"Ransomware"},
    {icon:"üêû", label:"Virus"},
    {icon:"‚ö†Ô∏è", label:"Phishing"}
];

const safeIcons = [
    {icon:"üîí", label:"Encryption"},
    {icon:"üõ°Ô∏è", label:"Firewall"},
    {icon:"üîë", label:"Strong Password"},
    {icon:"‚úîÔ∏è", label:"MFA Enabled"}
];

// Question bank (can expand)
const questions = [
    {
        q:"What is malware?",
        options:["A harmful software", "A secure backup method"],
        correct:0
    },
    {
        q:"What does a firewall do?",
        options:["Blocks unauthorized access", "Stores passwords"],
        correct:0
    },
    {
        q:"What is phishing?",
        options:["A cyber attack to steal data", "A secure login method"],
        correct:0
    },
    {
        q:"Which is safe?",
        options:["MFA", "Phishing link"],
        correct:0
    }
];

document.getElementById("startBtn").onclick = startGame;

function startGame() {
    if (gameRunning) return;

    score = 0;
    timeLeft = 30;
    gameRunning = true;
    document.getElementById("questionBox").style.display = "none";

    updatePanel();

    gameInterval = setInterval(spawnItem, 900);
    timerInterval = setInterval(updateTimer, 1000);
}

function updatePanel() {
    document.getElementById("scorePanel").innerHTML = 
        `Score: ${score} | Time: ${timeLeft}`;
}

function updateTimer() {
    if (timeLeft <= 0) {
        endGame();
        return;
    }
    timeLeft--;
    updatePanel();
}

function spawnItem() {
    if (!gameRunning) return;

    const gameArea = document.getElementById("gameArea");
    const item = document.createElement("div");

    const isThreat = Math.random() < 0.65;
    let data = isThreat ? threats[Math.floor(Math.random()*threats.length)]
                        : safeIcons[Math.floor(Math.random()*safeIcons.length)];

    item.classList.add("item", isThreat ? "threat" : "safe");
    item.innerHTML = data.icon;
    item.dataset.type = isThreat ? "threat" : "safe";

    item.style.left = Math.random() * (window.innerWidth - 80) + "px";
    item.style.top = "-80px";

    item.onclick = () => handleHit(item);

    gameArea.appendChild(item);

    let fall = setInterval(() => {
        item.style.top = (item.offsetTop + 5) + "px";

        if (item.offsetTop > window.innerHeight) {
            if (item.dataset.type === "threat") score -= 2;
            item.remove();
            updatePanel();
            clearInterval(fall);
        }
    }, 30);
}

function handleHit(item) {
    if (!gameRunning) return;

    if (item.dataset.type === "threat") {
        score += 10;
        item.classList.add("flash-green");
        showQuestion();   // <-- show question after each correct hit
    } else {
        score -= 5;
        item.classList.add("flash-red");
    }

    setTimeout(() => item.remove(), 150);
    updatePanel();
}

function showQuestion() {
    gameRunning = false;

    let q = questions[Math.floor(Math.random()*questions.length)];
    let box = document.getElementById("questionBox");

    box.style.display = "block";
    box.innerHTML = `<h3>${q.q}</h3>`;

    q.options.forEach((opt, i)=>{
        let div = document.createElement("div");
        div.className = "option";
        div.innerHTML = opt;

        div.onclick = function() {
            if (i === q.correct) {
                alert("Correct!");
                score += 5;
            } else {
                alert("Incorrect!");
                score -= 3;
            }

            box.style.display = "none";
            updatePanel();
            gameRunning = true;
        };

        box.appendChild(div);
    });
}

function endGame() {
    gameRunning = false;
    clearInterval(gameInterval);
    clearInterval(timerInterval);

    alert("Game Over! Final Score: " + score);
}
</script>
</body>
</html>
